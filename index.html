<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrakis Tycoon - Dune MMO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #1c1917; }
        h1, h2, h3, h4, .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .tab-button { transition: all 0.2s ease-in-out; }
        .tab-button.active { border-bottom-color: #f59e0b; color: #f59e0b; }
        .progress-bar-bg { background-color: #57534e; }
        .progress-bar-fill { background-color: #f59e0b; transition: width 0.3s ease; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #44403c; border-radius: 4px;}
        ::-webkit-scrollbar-thumb { background: #a8a29e; border-radius: 4px;}
        ::-webkit-scrollbar-thumb:hover { background: #d6d3d1; }
        .map-grid { display: grid; gap: 1px; background-color: #292524; border: 1px solid #44403c; }
        .map-cell { 
            position: relative;
            transition: all 0.1s;
            border: 1px solid transparent;
            cursor: pointer;
        }
        .map-cell:hover {
            transform: scale(1.05);
            z-index: 10;
            border-color: #ffffff;
        }
        .map-cell[data-coords]::after {
            content: attr(data-coords);
            position: absolute;
            bottom: 0;
            right: 0;
            font-size: 0.5rem;
            color: rgba(255,255,255,0.4);
            pointer-events: none;
        }
        .map-scroll-container {
            max-width: 100%;
            overflow: auto;
            scrollbar-width: thin;
            scrollbar-color: #78716c #292524;
        }
        .map-scroll-container::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .map-scroll-container::-webkit-scrollbar-track {
            background: #292524;
        }
        .map-scroll-container::-webkit-scrollbar-thumb {
            background-color: #78716c;
            border-radius: 4px;
        }
        #minimapContainer {
            cursor: pointer;
            box-shadow: 0 0 0 1px rgba(255,255,255,0.1);
            z-index: 20;
        }
        #minimapContainer::before {
            content: "Minimap";
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 8px;
            color: rgba(255,255,255,0.7);
            z-index: 1;
        }
        .player-indicator { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .modal { transition: all 0.3s ease-in-out; }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }
        .notification.show { transform: translateX(0); }
        .notification.success { background-color: #059669; }
        .notification.error { background-color: #dc2626; }
        .notification.warning { background-color: #d97706; }
        .notification.info { background-color: #2563eb; }
        .player-marker { position: absolute; z-index: 100; }
        .chat-bubble {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            z-index: 101;
            max-width: 200px;
            word-wrap: break-word;
        }
        .rank-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .rank-novice { background-color: #6b7280; color: white; }
        .rank-apprentice { background-color: #059669; color: white; }
        .rank-adept { background-color: #2563eb; color: white; }
        .rank-expert { background-color: #7c3aed; color: white; }
        .rank-master { background-color: #dc2626; color: white; }
        .rank-legend { background-color: #f59e0b; color: black; }
        .equipment-slot {
            border: 2px dashed #6b7280;
            transition: all 0.2s;
        }
        .equipment-slot.filled {
            border-style: solid;
            border-color: #f59e0b;
        }
        .item-rarity-common { border-color: #6b7280; }
        .item-rarity-uncommon { border-color: #059669; }
        .item-rarity-rare { border-color: #2563eb; }
        .item-rarity-epic { border-color: #7c3aed; }
        .item-rarity-legendary { border-color: #f59e0b; }
    </style>
</head>
<body class="bg-stone-900 text-amber-50 antialiased">

    <!-- Header -->
    <header class="bg-stone-800 border-b border-stone-700 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-3xl font-orbitron font-bold text-amber-400">Arrakis Tycoon</h1>
                <span class="text-sm text-amber-200 italic">The spice must flow...</span>
            </div>
            <div class="flex items-center space-x-4">
                <div class="text-sm">
                    <span class="text-stone-400">Players Online:</span>
                    <span id="playersOnline" class="text-amber-400 font-semibold">1</span>
                </div>
                <div class="text-sm">
                    <span class="text-stone-400">Rank:</span>
                    <span id="playerRank" class="rank-badge rank-novice">Novice</span>
                </div>
                <button id="settingsBtn" class="px-3 py-1 bg-stone-700 hover:bg-stone-600 rounded text-sm">‚öôÔ∏è</button>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-stone-800 border-b border-stone-700 px-6">
        <div class="flex space-x-1">
            <button class="tab-button active px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="game">Game</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="character">Character</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="upgrades">Upgrades</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="buildings">Buildings</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="units">Units</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="map">Map</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="quests">Quests</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="crafting">Crafting</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="inventory">Inventory</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="multiplayer">Multiplayer</button>
            <button class="tab-button px-4 py-3 text-sm font-medium border-b-2 border-transparent hover:text-amber-400" data-tab="lore">Lore</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-80 bg-stone-800 border-r border-stone-700 flex flex-col">
            <!-- Resources Panel -->
            <div class="p-4 border-b border-stone-700">
                <h3 class="text-lg font-semibold text-amber-400 mb-3">üì¶ Resources</h3>
                <div class="space-y-2">
                    <div class="flex items-center justify-between">
                        <span class="flex items-center text-sm">‚ú® Spice:</span>
                        <span id="spiceCount" class="font-mono text-amber-300">0</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="flex items-center text-sm">üíß Water:</span>
                        <span id="waterCount" class="font-mono text-blue-300">842</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="flex items-center text-sm">üí∞ Solari:</span>
                        <span id="solariCount" class="font-mono text-yellow-300">224</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="flex items-center text-sm">üîß Plasteel:</span>
                        <span id="plasteelCount" class="font-mono text-gray-300">146</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="flex items-center text-sm">üçñ Food:</span>
                        <span id="foodCount" class="font-mono text-green-300">20</span>
                    </div>
                    <div class="mt-3">
                        <span class="flex items-center text-sm">‚ù§Ô∏è Health:</span>
                        <div class="mt-1 progress-bar-bg rounded-full h-2">
                            <div id="healthBar" class="progress-bar-fill h-full rounded-full" style="width: 100%"></div>
                        </div>
                        <span id="healthText" class="text-xs text-stone-400">200 / 200</span>
                    </div>
                </div>
            </div>

            <!-- Manual Actions -->
            <div class="p-4 border-b border-stone-700">
                <h3 class="text-lg font-semibold text-amber-400 mb-3">üî® Manual Actions</h3>
                <div class="space-y-2">
                    <button id="harvestSpiceBtn" class="w-full px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded text-sm font-medium transition-colors">
                        ‚ú® Harvest Spice
                    </button>
                    <p class="text-xs text-stone-400">Click to gather spice manually</p>
                </div>
            </div>

            <!-- Quick Movement -->
            <div class="p-4 border-b border-stone-700">
                <h3 class="text-lg font-semibold text-amber-400 mb-3">üß≠ Movement</h3>
                <div class="grid grid-cols-3 gap-1">
                    <div></div>
                    <button id="moveNorth" class="p-2 bg-stone-700 hover:bg-stone-600 rounded text-xs">‚¨ÜÔ∏è</button>
                    <div></div>
                    <button id="moveWest" class="p-2 bg-stone-700 hover:bg-stone-600 rounded text-xs">‚¨ÖÔ∏è</button>
                    <button id="centerMap" class="p-2 bg-amber-600 hover:bg-amber-700 rounded text-xs">üéØ</button>
                    <button id="moveEast" class="p-2 bg-stone-700 hover:bg-stone-600 rounded text-xs">‚û°Ô∏è</button>
                    <div></div>
                    <button id="moveSouth" class="p-2 bg-stone-700 hover:bg-stone-600 rounded text-xs">‚¨áÔ∏è</button>
                    <div></div>
                </div>
                <div class="mt-2 text-xs text-stone-400">
                    <span>Position: </span>
                    <span id="playerPosition" class="font-mono text-amber-300">(25, 25)</span>
                </div>
            </div>

            <!-- Chat -->
            <div class="flex-1 flex flex-col p-4">
                <h3 class="text-lg font-semibold text-amber-400 mb-3">üí¨ Chat</h3>
                <div id="chatMessages" class="flex-1 bg-stone-900 rounded p-2 text-xs overflow-y-auto mb-2 min-h-32"></div>
                <div class="flex">
                    <input id="chatInput" type="text" placeholder="Type message..." class="flex-1 px-2 py-1 bg-stone-700 rounded-l text-sm" maxlength="200">
                    <button id="chatSend" class="px-3 py-1 bg-amber-600 hover:bg-amber-700 rounded-r text-sm">Send</button>
                </div>
            </div>
        </aside>

        <!-- Content Area -->
        <div class="flex-1 flex flex-col">
            <!-- Game Tab -->
            <div id="gameTab" class="tab-content flex-1 flex">
                <!-- Map Container -->
                <div class="flex-1 flex flex-col">
                    <div class="p-4 bg-stone-800 border-b border-stone-700 flex items-center justify-between">
                        <h2 class="text-xl font-semibold text-amber-400">üó∫Ô∏è Desert Map</h2>
                        <div class="flex items-center space-x-2">
                            <button id="zoomOut" class="px-2 py-1 bg-stone-700 hover:bg-stone-600 rounded text-sm">üîç-</button>
                            <button id="zoomIn" class="px-2 py-1 bg-stone-700 hover:bg-stone-600 rounded text-sm">üîç+</button>
                            <span id="zoomLevel" class="text-sm text-stone-400">100%</span>
                        </div>
                    </div>
                    <div class="flex-1 relative">
                        <div class="map-scroll-container h-full">
                            <div id="mapContainer" class="map-grid relative"></div>
                        </div>
                        <!-- Minimap -->
                        <div id="minimapContainer" class="absolute top-4 right-4 w-32 h-32 bg-stone-900 border border-stone-600 rounded"></div>
                    </div>
                </div>

                <!-- Event Log -->
                <div class="w-80 bg-stone-800 border-l border-stone-700 flex flex-col">
                    <div class="p-4 border-b border-stone-700">
                        <h3 class="text-lg font-semibold text-amber-400">üìú Event Log</h3>
                    </div>
                    <div id="gameLog" class="flex-1 p-4 overflow-y-auto text-sm space-y-1"></div>
                </div>
            </div>

            <!-- Character Tab -->
            <div id="characterTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üë§ Character Profile</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Character Info -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Basic Information</h3>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Name</label>
                                    <input id="playerName" type="text" class="w-full px-3 py-2 bg-stone-700 rounded" value="Survivor">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">House Affiliation</label>
                                    <select id="playerHouse" class="w-full px-3 py-2 bg-stone-700 rounded">
                                        <option value="">None</option>
                                        <option value="atreides">House Atreides</option>
                                        <option value="harkonnen">House Harkonnen</option>
                                        <option value="corrino">House Corrino</option>
                                        <option value="fremen">Fremen</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Background</label>
                                    <select id="playerBackground" class="w-full px-3 py-2 bg-stone-700 rounded">
                                        <option value="">None</option>
                                        <option value="noble">Noble</option>
                                        <option value="soldier">Soldier</option>
                                        <option value="merchant">Merchant</option>
                                        <option value="smuggler">Smuggler</option>
                                        <option value="explorer">Explorer</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Stats -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Statistics</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="playerLevel" class="font-semibold text-amber-400">1</span>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <span>Experience:</span>
                                        <span id="experienceText" class="font-semibold">0 / 100</span>
                                    </div>
                                    <div class="progress-bar-bg rounded-full h-2">
                                        <div id="experienceBar" class="progress-bar-fill h-full rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between">
                                    <span>Attack:</span>
                                    <span id="playerAttack" class="font-semibold text-red-400">10</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Defense:</span>
                                    <span id="playerDefense" class="font-semibold text-blue-400">5</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Total Spice:</span>
                                    <span id="totalSpice" class="font-semibold text-purple-400">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Areas Explored:</span>
                                    <span id="areasExplored" class="font-semibold text-green-400">1</span>
                                </div>
                            </div>
                        </div>

                        <!-- Equipment -->
                        <div class="bg-stone-800 rounded-lg p-6 lg:col-span-2">
                            <h3 class="text-xl font-semibold mb-4">Equipment</h3>
                            <div class="grid grid-cols-3 gap-4">
                                <div class="equipment-slot bg-stone-700 rounded-lg p-4 text-center" data-slot="weapon">
                                    <div class="text-2xl mb-2">‚öîÔ∏è</div>
                                    <div class="text-sm font-medium">Weapon</div>
                                    <div id="weaponSlot" class="text-xs text-stone-400 mt-1">Empty</div>
                                </div>
                                <div class="equipment-slot bg-stone-700 rounded-lg p-4 text-center" data-slot="armor">
                                    <div class="text-2xl mb-2">üõ°Ô∏è</div>
                                    <div class="text-sm font-medium">Armor</div>
                                    <div id="armorSlot" class="text-xs text-stone-400 mt-1">Empty</div>
                                </div>
                                <div class="equipment-slot bg-stone-700 rounded-lg p-4 text-center" data-slot="accessory">
                                    <div class="text-2xl mb-2">üíç</div>
                                    <div class="text-sm font-medium">Accessory</div>
                                    <div id="accessorySlot" class="text-xs text-stone-400 mt-1">Empty</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upgrades Tab -->
            <div id="upgradesTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">‚¨ÜÔ∏è Upgrades</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Manual Upgrades -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Manual Production</h3>
                            <div class="space-y-4">
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold">‚ú® Spice Harvesting</h4>
                                        <span id="manualSpiceLevel" class="text-sm bg-amber-600 px-2 py-1 rounded">Level 1</span>
                                    </div>
                                    <p class="text-sm text-stone-400 mb-3">Increases manual spice harvesting efficiency</p>
                                    <button id="upgradeManualSpice" class="w-full px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                        Upgrade - <span id="manualSpiceCost">20</span> Solari
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Automation -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Automation</h3>
                            <div class="space-y-4">
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold">ü§ñ Spice Harvesters</h4>
                                        <span id="autoSpiceCount" class="text-sm bg-blue-600 px-2 py-1 rounded">0 units</span>
                                    </div>
                                    <p class="text-sm text-stone-400 mb-3">Automatically harvest spice over time</p>
                                    <div class="flex space-x-2">
                                        <button id="buyAutoSpice" class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded">
                                            Buy - <span id="autoSpiceCost">100</span> Solari
                                        </button>
                                        <button id="upgradeAutoSpice" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded">
                                            Upgrade
                                        </button>
                                    </div>
                                </div>

                                <div class="border border-stone-600 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold">üíß Water Collectors</h4>
                                        <span id="autoWaterCount" class="text-sm bg-blue-600 px-2 py-1 rounded">0 units</span>
                                    </div>
                                    <p class="text-sm text-stone-400 mb-3">Automatically collect water from the atmosphere</p>
                                    <div class="flex space-x-2">
                                        <button id="buyAutoWater" class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded">
                                            Buy - <span id="autoWaterCost">150</span> Solari
                                        </button>
                                        <button id="upgradeAutoWater" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded">
                                            Upgrade
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buildings Tab -->
            <div id="buildingsTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üèóÔ∏è Buildings</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üè≠</div>
                                <h3 class="text-lg font-semibold">Spice Refinery</h3>
                                <p class="text-sm text-stone-400">Processes raw spice into valuable products</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="refineryLevel" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Production:</span>
                                    <span class="text-amber-400">+2 Solari/tick</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">500 Solari, 50 Plasteel</span>
                                </div>
                            </div>
                            <button id="buildRefinery" class="w-full mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                Build/Upgrade
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üè†</div>
                                <h3 class="text-lg font-semibold">Living Quarters</h3>
                                <p class="text-sm text-stone-400">Houses workers and increases efficiency</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="quartersLevel" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Effect:</span>
                                    <span class="text-green-400">+10% all production</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">300 Solari, 25 Plasteel</span>
                                </div>
                            </div>
                            <button id="buildQuarters" class="w-full mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                Build/Upgrade
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üõ°Ô∏è</div>
                                <h3 class="text-lg font-semibold">Defense Tower</h3>
                                <p class="text-sm text-stone-400">Protects your settlement from raids</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="towerLevel" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Defense:</span>
                                    <span class="text-blue-400">+50 Defense Rating</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">400 Solari, 40 Plasteel</span>
                                </div>
                            </div>
                            <button id="buildTower" class="w-full mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                Build/Upgrade
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üíß</div>
                                <h3 class="text-lg font-semibold">Water Reclamation</h3>
                                <p class="text-sm text-stone-400">Recycles and purifies water</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="waterLevel" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Production:</span>
                                    <span class="text-blue-400">+5 Water/tick</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">350 Solari, 30 Plasteel</span>
                                </div>
                            </div>
                            <button id="buildWater" class="w-full mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                Build/Upgrade
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üî¨</div>
                                <h3 class="text-lg font-semibold">Research Lab</h3>
                                <p class="text-sm text-stone-400">Unlocks new technologies</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="labLevel" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Effect:</span>
                                    <span class="text-purple-400">Unlocks upgrades</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">600 Solari, 60 Plasteel</span>
                                </div>
                            </div>
                            <button id="buildLab" class="w-full mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                Build/Upgrade
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üè™</div>
                                <h3 class="text-lg font-semibold">Trading Post</h3>
                                <p class="text-sm text-stone-400">Enables resource trading</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Level:</span>
                                    <span id="tradingLevel" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Effect:</span>
                                    <span class="text-yellow-400">Better trade rates</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">450 Solari, 35 Plasteel</span>
                                </div>
                            </div>
                            <button id="buildTrading" class="w-full mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded">
                                Build/Upgrade
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Units Tab -->
            <div id="unitsTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">‚öîÔ∏è Military Units</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üó°Ô∏è</div>
                                <h3 class="text-lg font-semibold">Infantry</h3>
                                <p class="text-sm text-stone-400">Basic ground troops</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Count:</span>
                                    <span id="infantryCount" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Attack:</span>
                                    <span class="text-red-400">15</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Defense:</span>
                                    <span class="text-blue-400">10</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">100 Solari, 5 Food</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Upkeep:</span>
                                    <span class="text-yellow-400">2 Food/tick</span>
                                </div>
                            </div>
                            <button id="recruitInfantry" class="w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                                Recruit
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üöÅ</div>
                                <h3 class="text-lg font-semibold">Ornithopter</h3>
                                <p class="text-sm text-stone-400">Fast aerial reconnaissance</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Count:</span>
                                    <span id="ornithopterCount" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Speed:</span>
                                    <span class="text-green-400">High</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Range:</span>
                                    <span class="text-blue-400">10 tiles</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">300 Solari, 20 Plasteel</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Upkeep:</span>
                                    <span class="text-yellow-400">5 Water/tick</span>
                                </div>
                            </div>
                            <button id="buildOrnithopter" class="w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                                Build
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üõ°Ô∏è</div>
                                <h3 class="text-lg font-semibold">Shield Generator</h3>
                                <p class="text-sm text-stone-400">Defensive energy barrier</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Count:</span>
                                    <span id="shieldCount" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Defense:</span>
                                    <span class="text-blue-400">100</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Coverage:</span>
                                    <span class="text-green-400">3x3 area</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">500 Solari, 50 Plasteel</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Upkeep:</span>
                                    <span class="text-yellow-400">10 Water/tick</span>
                                </div>
                            </div>
                            <button id="buildShield" class="w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                                Build
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üêõ</div>
                                <h3 class="text-lg font-semibold">Sandworm Caller</h3>
                                <p class="text-sm text-stone-400">Summons sandworms for protection</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Count:</span>
                                    <span id="callerCount" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Special:</span>
                                    <span class="text-purple-400">Area denial</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Damage:</span>
                                    <span class="text-red-400">Massive</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">1000 Solari, 100 Spice</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Upkeep:</span>
                                    <span class="text-yellow-400">20 Spice/tick</span>
                                </div>
                            </div>
                            <button id="recruitCaller" class="w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                                Recruit
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">üöõ</div>
                                <h3 class="text-lg font-semibold">Harvester</h3>
                                <p class="text-sm text-stone-400">Mobile spice collection unit</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Count:</span>
                                    <span id="harvesterCount" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Production:</span>
                                    <span class="text-amber-400">+10 Spice/tick</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Mobility:</span>
                                    <span class="text-green-400">Mobile</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">800 Solari, 80 Plasteel</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Upkeep:</span>
                                    <span class="text-yellow-400">15 Water/tick</span>
                                </div>
                            </div>
                            <button id="buildHarvester" class="w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                                Build
                            </button>
                        </div>

                        <div class="bg-stone-800 rounded-lg p-6">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-2">ü•∑</div>
                                <h3 class="text-lg font-semibold">Fremen Scout</h3>
                                <p class="text-sm text-stone-400">Elite desert warrior</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Count:</span>
                                    <span id="scoutCount" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Attack:</span>
                                    <span class="text-red-400">30</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Stealth:</span>
                                    <span class="text-purple-400">High</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Cost:</span>
                                    <span class="text-red-400">200 Solari, 50 Spice</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Upkeep:</span>
                                    <span class="text-yellow-400">1 Water/tick</span>
                                </div>
                            </div>
                            <button id="recruitScout" class="w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                                Recruit
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map Tab -->
            <div id="mapTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üó∫Ô∏è Full Map View</h2>
                    
                    <div class="bg-stone-800 rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold">Desert of Arrakis</h3>
                            <div class="flex items-center space-x-4">
                                <div class="text-sm">
                                    <span class="text-stone-400">Explored:</span>
                                    <span id="exploredCount" class="text-amber-400 font-semibold">1 / 2500</span>
                                </div>
                                <button id="fullMapCenter" class="px-3 py-1 bg-amber-600 hover:bg-amber-700 rounded text-sm">
                                    Center on Player
                                </button>
                            </div>
                        </div>
                        
                        <div class="border border-stone-600 rounded-lg overflow-hidden">
                            <div class="map-scroll-container h-96">
                                <div id="fullMapContainer" class="map-grid"></div>
                            </div>
                        </div>
                        
                        <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                                <span>Your Position</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-green-700 rounded"></div>
                                <span>Friendly Locations</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-orange-600 rounded"></div>
                                <span>Resource Deposits</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-red-600 rounded"></div>
                                <span>Hostile Areas</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quests Tab -->
            <div id="questsTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üìú Quests & Missions</h2>
                    
                    <div class="space-y-6">
                        <!-- Active Quests -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Active Quests</h3>
                            <div id="activeQuests" class="space-y-4">
                                <!-- Quests will be populated here -->
                            </div>
                        </div>

                        <!-- Completed Quests -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Completed Quests</h3>
                            <div id="completedQuests" class="space-y-4">
                                <!-- Completed quests will be populated here -->
                            </div>
                        </div>

                        <!-- Daily Challenges -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">Daily Challenges</h3>
                            <div id="dailyChallenges" class="space-y-4">
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold">üí∞ Wealth Accumulator</h4>
                                        <span class="text-sm bg-blue-600 px-2 py-1 rounded">24h remaining</span>
                                    </div>
                                    <p class="text-sm text-stone-400 mb-2">Earn 1000 Solari today</p>
                                    <div class="progress-bar-bg rounded-full h-2 mb-2">
                                        <div class="progress-bar-fill h-full rounded-full" style="width: 22%"></div>
                                    </div>
                                    <div class="flex justify-between text-xs">
                                        <span>224 / 1000 Solari</span>
                                        <span class="text-amber-400">Reward: 50 Spice</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Crafting Tab -->
            <div id="craftingTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üî® Crafting Workshop</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Crafting Categories -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">Categories</h3>
                            <div class="space-y-2">
                                <button class="craft-category-btn w-full text-left px-3 py-2 bg-stone-700 hover:bg-stone-600 rounded" data-category="weapons">
                                    ‚öîÔ∏è Weapons
                                </button>
                                <button class="craft-category-btn w-full text-left px-3 py-2 bg-stone-700 hover:bg-stone-600 rounded" data-category="armor">
                                    üõ°Ô∏è Armor
                                </button>
                                <button class="craft-category-btn w-full text-left px-3 py-2 bg-stone-700 hover:bg-stone-600 rounded" data-category="tools">
                                    üîß Tools
                                </button>
                                <button class="craft-category-btn w-full text-left px-3 py-2 bg-stone-700 hover:bg-stone-600 rounded" data-category="consumables">
                                    üß™ Consumables
                                </button>
                            </div>
                        </div>

                        <!-- Recipes -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">Recipes</h3>
                            <div id="craftingRecipes" class="space-y-3">
                                <!-- Recipes will be populated based on selected category -->
                            </div>
                        </div>

                        <!-- Crafting Queue -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">Crafting Queue</h3>
                            <div id="craftingQueue" class="space-y-3">
                                <p class="text-stone-400 text-sm">No items being crafted</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Tab -->
            <div id="inventoryTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üéí Inventory</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        <!-- Inventory Grid -->
                        <div class="lg:col-span-3 bg-stone-800 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold">Items</h3>
                                <div class="text-sm text-stone-400">
                                    <span id="inventoryCount">0</span> / <span id="inventoryMax">50</span> slots
                                </div>
                            </div>
                            
                            <div id="inventoryGrid" class="grid grid-cols-8 gap-2">
                                <!-- Inventory slots will be generated here -->
                            </div>
                        </div>

                        <!-- Item Details -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">Item Details</h3>
                            <div id="itemDetails" class="text-center text-stone-400">
                                <p>Select an item to view details</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Multiplayer Tab -->
            <div id="multiplayerTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üë• Multiplayer</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Player List -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">Online Players</h3>
                            <div id="playerList" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Players will be populated here -->
                            </div>
                        </div>

                        <!-- Leaderboard -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">üèÜ Leaderboard</h3>
                            <div class="space-y-3">
                                <div class="flex items-center space-x-3 p-3 bg-amber-900 rounded">
                                    <span class="text-2xl">üëë</span>
                                    <div class="flex-1">
                                        <div class="font-semibold">SpiceLord_2024</div>
                                        <div class="text-sm text-stone-400">Baron ‚Ä¢ 15,420 Spice ‚Ä¢ Epic Gear</div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-amber-400">#1</div>
                                        <div class="text-xs text-stone-400">Score: 89,234</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3 p-3 bg-stone-700 rounded">
                                    <span class="text-2xl">ü•à</span>
                                    <div class="flex-1">
                                        <div class="font-semibold">DesertWalker</div>
                                        <div class="text-sm text-stone-400">Duke ‚Ä¢ 12,890 Spice ‚Ä¢ Rare Gear</div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-stone-400">#2</div>
                                        <div class="text-xs text-stone-400">Score: 67,891</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3 p-3 bg-stone-700 rounded">
                                    <span class="text-2xl">ü•â</span>
                                    <div class="flex-1">
                                        <div class="font-semibold">FremenWarrior</div>
                                        <div class="text-sm text-stone-400">Count ‚Ä¢ 9,456 Spice ‚Ä¢ Uncommon Gear</div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-amber-600">#3</div>
                                        <div class="text-xs text-stone-400">Score: 45,623</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Guilds -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">üèõÔ∏è Guilds</h3>
                            <div class="space-y-4">
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <h4 class="font-semibold mb-2">House Atreides Coalition</h4>
                                    <p class="text-sm text-stone-400 mb-3">A noble alliance focused on fair trade and mutual defense</p>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">Members: 23/50</span>
                                        <button class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm">Join</button>
                                    </div>
                                </div>
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <h4 class="font-semibold mb-2">Harkonnen Dominion</h4>
                                    <p class="text-sm text-stone-400 mb-3">Aggressive expansion through superior firepower</p>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">Members: 31/50</span>
                                        <button class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm">Join</button>
                                    </div>
                                </div>
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <h4 class="font-semibold mb-2">Fremen Brotherhood</h4>
                                    <p class="text-sm text-stone-400 mb-3">Desert survival specialists and spice masters</p>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">Members: 18/30</span>
                                        <button class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm">Join</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Events -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-lg font-semibold mb-4">üéâ Server Events</h3>
                            <div class="space-y-4">
                                <div class="border border-amber-600 rounded-lg p-4 bg-amber-900/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold text-amber-400">Great Spice Rush</h4>
                                        <span class="text-xs bg-amber-600 px-2 py-1 rounded">ACTIVE</span>
                                    </div>
                                    <p class="text-sm text-stone-400 mb-2">Double spice production for all players!</p>
                                    <div class="text-xs text-amber-400">Ends in: 2h 34m</div>
                                </div>
                                <div class="border border-stone-600 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold">Sandworm Migration</h4>
                                        <span class="text-xs bg-stone-600 px-2 py-1 rounded">UPCOMING</span>
                                    </div>
                                    <p class="text-sm text-stone-400 mb-2">Increased enemy activity across the desert</p>
                                    <div class="text-xs text-stone-400">Starts in: 6h 12m</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lore Tab -->
            <div id="loreTab" class="tab-content hidden flex-1 p-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-bold text-amber-400 mb-6">üìö Lore & Knowledge</h2>
                    
                    <div class="space-y-6">
                        <!-- Planet Arrakis -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üèúÔ∏è Planet Arrakis</h3>
                            <div class="prose prose-invert max-w-none">
                                <p class="text-stone-300 leading-relaxed">
                                    Arrakis, also known as Dune, is a harsh desert planet and the sole source of the universe's most valuable substance: the spice melange. The planet's surface is almost entirely covered by vast deserts, broken only by rocky outcroppings and the occasional polar ice cap.
                                </p>
                                <p class="text-stone-300 leading-relaxed mt-4">
                                    The spice is created by the sandworms, massive creatures that can grow over 400 meters long. These ancient beings are both revered and feared by the planet's inhabitants, the Fremen, who have learned to live in harmony with the desert's deadly beauty.
                                </p>
                            </div>
                        </div>

                        <!-- The Great Houses -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üèõÔ∏è The Great Houses</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="border border-blue-600 rounded-lg p-4">
                                    <h4 class="font-semibold text-blue-400 mb-2">House Atreides</h4>
                                    <p class="text-sm text-stone-300">Known for their honor and loyalty, House Atreides values justice and fair governance. Led by Duke Leto, they have earned the respect of their subjects through benevolent rule.</p>
                                </div>
                                <div class="border border-red-600 rounded-lg p-4">
                                    <h4 class="font-semibold text-red-400 mb-2">House Harkonnen</h4>
                                    <p class="text-sm text-stone-300">The traditional enemies of House Atreides, the Harkonnens rule through fear and brutality. Baron Vladimir Harkonnen's cruelty is matched only by his cunning.</p>
                                </div>
                                <div class="border border-yellow-600 rounded-lg p-4">
                                    <h4 class="font-semibold text-yellow-400 mb-2">House Corrino</h4>
                                    <p class="text-sm text-stone-300">The Imperial House, led by Emperor Shaddam IV. They control the Sardaukar, the most feared military force in the universe, but their power wanes as the spice trade grows.</p>
                                </div>
                                <div class="border border-green-600 rounded-lg p-4">
                                    <h4 class="font-semibold text-green-400 mb-2">The Fremen</h4>
                                    <p class="text-sm text-stone-300">The desert people of Arrakis, hardened by generations of survival in the harsh environment. They possess intimate knowledge of the desert and its dangers.</p>
                                </div>
                            </div>
                        </div>

                        <!-- The Spice -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">‚ú® The Spice Melange</h3>
                            <div class="prose prose-invert max-w-none">
                                <p class="text-stone-300 leading-relaxed">
                                    Melange is the most valuable substance in the universe. It extends life, enhances mental capabilities, and makes interstellar travel possible by allowing Navigators to see safe paths through folded space. The spice has a distinctive cinnamon scent and appears as a fine, orange powder.
                                </p>
                                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="bg-amber-900/30 rounded-lg p-3">
                                        <h5 class="font-semibold text-amber-400 mb-1">Life Extension</h5>
                                        <p class="text-xs text-stone-300">Regular consumption can extend human lifespan significantly</p>
                                    </div>
                                    <div class="bg-purple-900/30 rounded-lg p-3">
                                        <h5 class="font-semibold text-purple-400 mb-1">Prescience</h5>
                                        <p class="text-xs text-stone-300">Allows users to see possible futures</p>
                                    </div>
                                    <div class="bg-blue-900/30 rounded-lg p-3">
                                        <h5 class="font-semibold text-blue-400 mb-1">Space Travel</h5>
                                        <p class="text-xs text-stone-300">Essential for navigating between star systems</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Discovered Locations -->
                        <div class="bg-stone-800 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4">üó∫Ô∏è Discovered Locations</h3>
                            <div id="discoveredLocations" class="space-y-3">
                                <div class="border border-stone-600 rounded-lg p-3">
                                    <h4 class="font-semibold text-green-400">Starting Outpost (25, 25)</h4>
                                    <p class="text-sm text-stone-400">Your humble beginning on Arrakis. A small shelter with basic facilities.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Combat Modal -->
    <div id="combatModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50">
        <div class="bg-stone-800 rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold text-red-400 mb-4">‚öîÔ∏è Combat</h3>
            
            <!-- Enemy Info -->
            <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <span id="combatEnemyName" class="font-semibold">Enemy</span>
                    <span id="combatEnemyHealth" class="text-sm">100 / 100</span>
                </div>
                <div class="progress-bar-bg rounded-full h-2">
                    <div id="combatEnemyHealthBar" class="bg-red-500 h-full rounded-full" style="width: 100%"></div>
                </div>
            </div>

            <!-- Player Info -->
            <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-semibold">You</span>
                    <span id="combatPlayerHealth" class="text-sm">200 / 200</span>
                </div>
                <div class="progress-bar-bg rounded-full h-2">
                    <div id="combatPlayerHealthBar" class="progress-bar-fill h-full rounded-full" style="width: 100%"></div>
                </div>
            </div>

            <!-- Combat Log -->
            <div id="combatLog" class="bg-stone-900 rounded p-3 h-32 overflow-y-auto text-sm mb-4">
                <p>Combat initiated!</p>
            </div>

            <!-- Actions -->
            <div class="flex space-x-2">
                <button id="combatAttackBtn" class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                    Attack
                </button>
                <button id="combatFleeBtn" class="px-4 py-2 bg-stone-600 hover:bg-stone-700 rounded">
                    Flee
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50">
        <div class="bg-stone-800 rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold text-amber-400 mb-4">‚öôÔ∏è Settings</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Game Speed</label>
                    <select id="gameSpeedSelect" class="w-full px-3 py-2 bg-stone-700 rounded">
                        <option value="2000">Slow (2s per tick)</option>
                        <option value="1000" selected>Normal (1s per tick)</option>
                        <option value="500">Fast (0.5s per tick)</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1">Sound Effects</label>
                    <input type="checkbox" id="soundEnabled" checked class="mr-2">
                    <span class="text-sm">Enable sound effects</span>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1">Auto-save</label>
                    <input type="checkbox" id="autoSaveEnabled" checked class="mr-2">
                    <span class="text-sm">Save game automatically</span>
                </div>
                
                <div class="flex space-x-2 pt-4">
                    <button id="saveGameBtn" class="flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded">
                        Save Game
                    </button>
                    <button id="loadGameBtn" class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded">
                        Load Game
                    </button>
                </div>
                
                <div class="flex space-x-2">
                    <button id="resetGameBtn" class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 rounded">
                        Reset Game
                    </button>
                    <button id="closeSettingsBtn" class="flex-1 px-4 py-2 bg-stone-600 hover:bg-stone-700 rounded">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <script type="module">
        // ===== CORE GAME STATE MANAGEMENT =====
        class GameState {
            constructor() {
                this.initialized = false;
                this.loading = true;
                this.currentTab = 'game';
                this.lastUpdate = Date.now();
                this.gameSpeed = 1000; // ms per tick
                this.autoSave = true;
                this.soundEnabled = true;
                
                // Player data
                this.player = {
                    id:
